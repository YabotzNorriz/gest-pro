<app-header></app-header>

<ion-content [fullscreen]="true">
  @if (!isLoading) {
    <form [formGroup]="projectForm" (ngSubmit)="onUpdate()">
      <div class="ion-padding">
        <h2 class="form-title">Editar Projeto</h2>

        <ion-list lines="full">
          <ion-item>
            <ion-label>Num projeto</ion-label>
            <ion-input
              formControlName="numProjeto"
              class="ion-text-right"
              placeholder="exemplo"
            ></ion-input>
          </ion-item>

          <ion-item>
            <ion-label>Data início</ion-label>
            <ion-input
              formControlName="dataInicio"
              class="ion-text-right"
              type="date"
              placeholder="exemplo"
            ></ion-input>
          </ion-item>

          <ion-item>
            <ion-label>Nome Projeto</ion-label>
            <ion-input
              formControlName="nomeProjeto"
              class="ion-text-right"
              placeholder="exemplo"
            ></ion-input>
          </ion-item>

          <ion-item>
            <ion-label>Áreas</ion-label>
            <ion-input
              formControlName="areas"
              class="ion-text-right"
              placeholder="exemplo"
            ></ion-input>
          </ion-item>

          <ion-item>
            <ion-label>Responsável</ion-label>
            <ion-input
              formControlName="responsavel"
              class="ion-text-right"
              placeholder="exemplo"
            ></ion-input>
          </ion-item>

          <ion-item>
            <ion-label>Escopo</ion-label>
            <ion-textarea
              formControlName="escopo"
              class="ion-text-right"
              placeholder="exemplo"
              [autoGrow]="true"
            ></ion-textarea>
          </ion-item>

          <ion-item>
            <ion-label>Status</ion-label>
            <ion-select formControlName="status">
              @for (s of statusOptions; track s) {
                <ion-select-option [value]="s">
                  {{ s | titlecase }}
                </ion-select-option>
              }
            </ion-select>
          </ion-item>

          <ion-item>
            <ion-label>Tags (separadas por vírgula)</ion-label>
            <ion-input
              formControlName="tags"
              class="ion-text-right"
              placeholder="ex: tag1, tag2"
            ></ion-input>
          </ion-item>
        </ion-list>

        <div class="button-container">
          <ion-button
            class="form-button"
            color="primary"
            type="submit"
            [disabled]="projectForm.invalid"
            >SALVAR</ion-button
          >
          <ion-button
            class="form-button ion-margin-top"
            color="danger"
            (click)="onDeleteConfirm()"
            >EXCLUIR</ion-button
          >
          <ion-button
            class="form-button ion-margin-top"
            color="light"
            (click)="onClickBtnCancelar()"
            >CANCELAR</ion-button
          >
        </div>
      </div>
    </form>
  } @else {
    <div class="loading-container">
      <ion-spinner name="crescent"></ion-spinner>
      <p>Carregando dados do projeto...</p>
    </div>
  }
</ion-content>